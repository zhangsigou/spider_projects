{extend name="../../admin/view/main"}

{block name="style"}{include file='help/formstyle'}{/block}

{block name='content'}
<form class="layui-form layui-card" action="{:request()->url()}" data-auto="true" method="post" autocomplete="off" style="padding-top: 20px">
          <div class="layui-form-item">
                <label class="layui-form-label">标题：</label>
                <div class="layui-input-block">
                    <input type="hidden" value="{$vo.id|default=''}" name="id">
                      <input type="text" name="title" required  lay-verify="required|title" placeholder="请输入标题" autocomplete="off" class="layui-input" style="width: 550px" value="{$vo.title|default=''}">
                    </div>
              </div>
        <div class="layui-form-item">
            <label class="layui-form-label">帮办类型：</label>
            <div class="layui-input-block" style="width: 550px;height: auto">
                <select required name="type" lay-verify="required">

                    {foreach $typelist as $key=>$vos}
                    {eq name='vos.id' value='$vo.type|default=0'}
                    <option value="{$vos.id}" selected >{$vos.hname}</option>
                    {else}
                    <option value="{$vos.id}">{$vos.hname}</option>
                    {/eq}
                    {/foreach}
                </select>
            </div>
        </div>
          <div class="layui-form-item layui-form-text">
                <label class="layui-form-label">内容：</label>
                <div class="layui-input-block" >
                      <textarea required name="content" placeholder="请输入内容" class="layui-textarea|content" style="width: 550px" >{$vo.content|default=''}</textarea>
                    </div>
              </div>

         <div class="layui-form-item">
              <label class="layui-form-label">求助人：</label>
             <div class="layui-input-block">
                 <input type="text" name="users" required  lay-verify="required|fname" placeholder="请输入求助人姓名" autocomplete="off" class="layui-input" style="width: 550px" value="{$vo.users|default=''}" >
                  </div>
             </div>
          <div class="layui-form-item">
              <label class="layui-form-label">联系方式：</label>
             <div class="layui-input-block">
                 <input type="text" name="telphone" required  lay-verify="required|phone" placeholder="请输入联系方式" autocomplete="off" class="layui-input" style="width: 550px" value="{$vo.telphone|default=''}">
                  </div>
              </div>

    <div class="layui-form-item text-center">
        <button class="layui-btn" lay-submit="" lay-verify="" type='submit'>保存数据</button>
        <button class="layui-btn layui-btn-danger" type='button' data-confirm="确定要取消编辑吗？" data-close>取消编辑</button>
    </div>
        </form>

{/block}


{block name='script'}
<script>
    form.render();
    layui.use(['form'], function () {
        var form = layui.form;
        //自定义验证规则
        form.verify({
            title: function (value) {
                if (value.length < 5) {
                    return '标题至少得5个字符啊';
                }
            }, fname: function (value) {
                if (value.length < 4) {
                    return '请输入至少4位的用户名';
                }
            }, contact: function (value) {
                if (value.length < 4) {
                    return '内容请输入至少4个字符';
                }
            }
            , phone: [/^1[3|4|5|7|8]\d{9}$/, '手机必须11位，只能是数字！']
        });
        //监听提交
        form.on('submit(demo1)', function(data){
            layer.alert(JSON.stringify(data.field), {
                title: '最终的提交信息'
            })
            return false;
        });
    });
</script>
{/block}
{extend name="../../admin/view/main"}

{block name="style"}{include file='help/formstyle'}{/block}

{block name='content'}
<form class="layui-form layui-card" action="{:request()->url()}" data-auto="true" method="post" autocomplete="off">
    <div class="layui-card-body padding-left-40">
        <div class="layui-row layui-col-space15">

            <div class="layui-col-xs5">
                <label class="block relative">
                    <span class="color-green font-w7">新闻分类名称</span>
                    <span class="color-desc margin-left-5">catename</span>
                    <input name="catename" lay-verify="title" value='{$vo.catename|default=""}' required placeholder="请输入新闻分类名称" class="layui-input">
                    <span class="help-block">新闻分类名称，请保持不要重复</span>
                </label>
            </div>

            <div class="layui-col-xs5">
                <div class="layui-form-item" data-keys-type='image'>
                    <span class="color-green font-w7">上传图片</span>
                    <div>
                        <input type="hidden" class="layui-input" onchange="$(this).nextAll('img').attr('src', this.value)" value="{$vo.catimg|default=''}"  name="catimg" required placeholder="请上传图片或输入图片URL地址">
                        <a data-file="btn" data-type="bmp,png,jpeg,jpg,gif" data-field="catimg" class="input-group-addon"><i class="layui-icon layui-icon-upload">选择图片</i></a>
                        <img data-tips-image src='{$vo.catimg|default=""}' alt="img" style="width: 50px;height: 50px">
                    </div>
                    <span class="help-block">新闻图片，请保持不要重复</span>
                </div>
            </div>

        </div>

        <div class="hr-line-dashed"></div>
        {notempty name='vo.id'}<input type='hidden' value='{$vo.id}' name='id'>{/notempty}
        <div class="layui-form-item text-center">
            <button class="layui-btn" lay-submit="" lay-filter=""  type='submit'>保存数据</button>
            <button class="layui-btn layui-btn-danger" type='button' data-confirm="确定要取消编辑吗？" data-close>取消编辑</button>
        </div>
    </div>
</form>
{/block}
{block name='script'}
<script>
    form.render();
    layui.use(['form'], function () {
        var form = layui.form;
        //自定义验证规则
        form.verify({
            title: function (value) {
                if (value.length < 3) {
                    return '新闻分类名称至少得3个字符啊';
                }
            }
        });
        //监听提交
        // form.on('submit(demo1)', function(data){
        // layer.alert(JSON.stringify(data.field), {
        // title: '最终的提交信息'
        // })
        // return false;
        // });
    });
</script>
{/block}